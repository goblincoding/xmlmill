\hypertarget{gcplaintextedit_8cpp_source}{\section{gcplaintextedit.\-cpp}
}

\begin{DoxyCode}
00001 \textcolor{comment}{/* Copyright (c) 2012 - 2013 by William Hallatt.}
00002 \textcolor{comment}{ *}
00003 \textcolor{comment}{ * This file forms part of "XML Mill".}
00004 \textcolor{comment}{ *}
00005 \textcolor{comment}{ * The official website for this project is <http://www.goblincoding.com> and,}
00006 \textcolor{comment}{ * although not compulsory, it would be appreciated if all works of whatever}
00007 \textcolor{comment}{ * nature using this source code (in whole or in part) include a reference to}
00008 \textcolor{comment}{ * this site.}
00009 \textcolor{comment}{ *}
00010 \textcolor{comment}{ * Should you wish to contact me for whatever reason, please do so via:}
00011 \textcolor{comment}{ *}
00012 \textcolor{comment}{ *                 <http://www.goblincoding.com/contact>}
00013 \textcolor{comment}{ *}
00014 \textcolor{comment}{ * This program is free software: you can redistribute it and/or modify it
       under}
00015 \textcolor{comment}{ * the terms of the GNU General Public License as published by the Free
       Software}
00016 \textcolor{comment}{ * Foundation, either version 3 of the License, or (at your option) any later}
00017 \textcolor{comment}{ * version.}
00018 \textcolor{comment}{ *}
00019 \textcolor{comment}{ * This program is distributed in the hope that it will be useful, but WITHOUT}
00020 \textcolor{comment}{ * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
       FITNESS}
00021 \textcolor{comment}{ * FOR A PARTICULAR PURPOSE.  See the GNU General Public License for more
       details.}
00022 \textcolor{comment}{ *}
00023 \textcolor{comment}{ * You should have received a copy of the GNU General Public License along with}
00024 \textcolor{comment}{ * this program (GNUGPL.txt).  If not, see}
00025 \textcolor{comment}{ *}
00026 \textcolor{comment}{ *                    <http://www.gnu.org/licenses/>}
00027 \textcolor{comment}{ */}
00028 
00029 \textcolor{preprocessor}{#include "gcplaintextedit.h"}
00030 \textcolor{preprocessor}{#include "xml/xmlsyntaxhighlighter.h"}
00031 \textcolor{preprocessor}{#include "utils/gcglobalspace.h"}
00032 \textcolor{preprocessor}{#include "utils/gcmessagespace.h"}
00033 
00034 \textcolor{preprocessor}{#include <QMenu>}
00035 \textcolor{preprocessor}{#include <QAction>}
00036 \textcolor{preprocessor}{#include <QDomDocument>}
00037 
00038 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00039 
00040 \textcolor{keyword}{const} QString OPENCOMMENT( \textcolor{stringliteral}{"<!--"} );
00041 \textcolor{keyword}{const} QString CLOSECOMMENT( \textcolor{stringliteral}{"-->"} );
00042 
00043 \textcolor{comment}{/*-------------------------------- NON MEMBER FUNCTIONS
       --------------------------------*/}
00044 
00045 \textcolor{keywordtype}{void} removeDuplicates( QList< int > &indices )
00046 \{
00047   \textcolor{keywordflow}{for}( \textcolor{keywordtype}{int} i = 0; i < indices.size(); ++i )
00048   \{
00049     \textcolor{keywordflow}{if}( indices.count( indices.at( i ) ) > 1 )
00050     \{
00051       \textcolor{keywordtype}{int} backup = indices.at( i );
00052 
00053       \textcolor{comment}{/* Remove all duplicates. */}
00054       indices.removeAll( backup );
00055 
00056       \textcolor{comment}{/* Add one occurrence back. */}
00057       indices.append( backup );
00058     \}
00059   \}
00060 \}
00061 
00062 \textcolor{comment}{/*---------------------------------- MEMBER FUNCTIONS
       ----------------------------------*/}
00063 
00064 GCPlainTextEdit::GCPlainTextEdit( QWidget *parent ) :
00065   QPlainTextEdit   ( parent ),
00066   m\_savedPalette   (),
00067   m\_comment        ( NULL ),
00068   m\_uncomment      ( NULL ),
00069   m\_deleteSelection( NULL ),
00070   m\_deleteEmptyRow ( NULL ),
00071   m\_insertEmptyRow ( NULL ),
00072   m\_cursorPositionChanging( false )
00073 \{
00074   setAcceptDrops( \textcolor{keyword}{false} );
00075   setFont( QFont( \hyperlink{namespace_g_c_global_space_a9d7158c8a1dfcc867d85ee6b9c5c4810}{GCGlobalSpace::FONT}, \hyperlink{namespace_g_c_global_space_ab9fa2f10bab070a4f59b7e3ef9166c86}{GCGlobalSpace::FONTSIZE} ) );
00076   setCenterOnScroll( \textcolor{keyword}{true} );
00077   setTextInteractionFlags( Qt::TextSelectableByMouse | 
      Qt::TextSelectableByKeyboard );
00078   setContextMenuPolicy( Qt::CustomContextMenu );
00079 
00080   m\_comment = \textcolor{keyword}{new} QAction( \textcolor{stringliteral}{"Comment Out Selection"}, \textcolor{keyword}{this} );
00081   m\_uncomment = \textcolor{keyword}{new} QAction( \textcolor{stringliteral}{"Uncomment Selection"}, \textcolor{keyword}{this} );
00082   m\_deleteSelection = \textcolor{keyword}{new} QAction( \textcolor{stringliteral}{"Delete Selection"}, \textcolor{keyword}{this} );
00083   m\_deleteEmptyRow = \textcolor{keyword}{new} QAction( \textcolor{stringliteral}{"Delete Empty Line"}, \textcolor{keyword}{this} );
00084   m\_insertEmptyRow = \textcolor{keyword}{new} QAction( \textcolor{stringliteral}{"Insert Empty Line"}, \textcolor{keyword}{this} );
00085 
00086   m\_deleteEmptyRow->setShortcut( Qt::Key\_Delete );
00087   m\_insertEmptyRow->setShortcut( Qt::Key\_Return );
00088 
00089   connect( m\_comment, SIGNAL( triggered() ), \textcolor{keyword}{this}, SLOT( commentOutSelection() 
      ) );
00090   connect( m\_uncomment, SIGNAL( triggered() ), \textcolor{keyword}{this}, SLOT( uncommentSelection()
       ) );
00091   connect( m\_deleteSelection, SIGNAL( triggered() ), \textcolor{keyword}{this}, SLOT( 
      deleteSelection() ) );
00092   connect( m\_deleteEmptyRow, SIGNAL( triggered() ), \textcolor{keyword}{this}, SLOT( deleteEmptyRow(
      ) ) );
00093   connect( m\_insertEmptyRow, SIGNAL( triggered() ), \textcolor{keyword}{this}, SLOT( insertEmptyRow(
      ) ) );
00094 
00095   connect( \textcolor{keyword}{this}, SIGNAL( customContextMenuRequested( \textcolor{keyword}{const} QPoint& ) ), \textcolor{keyword}{this}, 
      SLOT( showContextMenu( \textcolor{keyword}{const} QPoint& ) ) );
00096   connect( \textcolor{keyword}{this}, SIGNAL( cursorPositionChanged() ), \textcolor{keyword}{this}, SLOT( 
      emitSelectedIndex() ) );
00097 
00098   \textcolor{comment}{/* Everything happens automagically and the text edit takes ownership. */}
00099   \hyperlink{class_xml_syntax_highlighter}{XmlSyntaxHighlighter} *highLighter = \textcolor{keyword}{new} \hyperlink{class_xml_syntax_highlighter}{XmlSyntaxHighlighter}( document() );
00100   Q\_UNUSED( highLighter );
00101 \}
00102 
00103 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00104 
\hypertarget{gcplaintextedit_8cpp_source_l00105}{}\hyperlink{class_g_c_plain_text_edit_af658d66d1fe8c1885d708de16b115b0f}{00105} \textcolor{keywordtype}{void} \hyperlink{class_g_c_plain_text_edit_af658d66d1fe8c1885d708de16b115b0f}{GCPlainTextEdit::setContent}( \textcolor{keyword}{const} QString &text )
00106 \{
00107   m\_cursorPositionChanging = \textcolor{keyword}{true};
00108 
00109   \textcolor{comment}{/* Squeezing every once of performance out of the text edit...this
       significantly speeds}
00110 \textcolor{comment}{    up the loading of large files. */}
00111   setUpdatesEnabled( \textcolor{keyword}{false} );
00112   setPlainText( text );
00113   setUpdatesEnabled( \textcolor{keyword}{true} );
00114 
00115   m\_cursorPositionChanging = \textcolor{keyword}{false};
00116 \}
00117 
00118 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00119 
\hypertarget{gcplaintextedit_8cpp_source_l00120}{}\hyperlink{class_g_c_plain_text_edit_a9c3603b9e62a7737b8d442da4a16109d}{00120} \textcolor{keywordtype}{void} \hyperlink{class_g_c_plain_text_edit_a9c3603b9e62a7737b8d442da4a16109d}{GCPlainTextEdit::findTextRelativeToDuplicates}( \textcolor{keyword}{const} QString &text, \textcolor{keywordtype}{int} 
      relativePos )
00121 \{
00122   m\_cursorPositionChanging = \textcolor{keyword}{true};
00123 
00124   moveCursor( QTextCursor::Start );
00125 
00126   \textcolor{keywordflow}{for}( \textcolor{keywordtype}{int} i = 0; i <= relativePos; ++i )
00127   \{
00128     find( text );
00129   \}
00130 
00131   m\_cursorPositionChanging = \textcolor{keyword}{false};
00132 \}
00133 
00134 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00135 
\hypertarget{gcplaintextedit_8cpp_source_l00136}{}\hyperlink{class_g_c_plain_text_edit_a974f08b952447cec6f1935140d9808b1}{00136} \textcolor{keywordtype}{void} \hyperlink{class_g_c_plain_text_edit_a974f08b952447cec6f1935140d9808b1}{GCPlainTextEdit::clearAndReset}()
00137 \{
00138   m\_cursorPositionChanging = \textcolor{keyword}{true};
00139   clear();
00140   m\_cursorPositionChanging = \textcolor{keyword}{false};
00141 \}
00142 
00143 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00144 
00145 \textcolor{keywordtype}{void} GCPlainTextEdit::emitSelectedIndex()
00146 \{
00147   \textcolor{keywordflow}{if}( !m\_cursorPositionChanging )
00148   \{
00149     emit \hyperlink{class_g_c_plain_text_edit_aa318864494827fed57e319302f74ec89}{selectedIndex}( findIndexMatchingBlockNumber( textCursor().block() ) );
00150   \}
00151 \}
00152 
00153 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00154 
00155 \textcolor{keywordtype}{void} GCPlainTextEdit::showContextMenu( \textcolor{keyword}{const} QPoint &point )
00156 \{
00157   m\_comment->setEnabled( textCursor().hasSelection() );
00158   m\_uncomment->setEnabled( textCursor().hasSelection() );
00159   m\_deleteSelection->setEnabled( textCursor().hasSelection() );
00160 
00161   QMenu *menu = createStandardContextMenu();
00162   menu->addSeparator();
00163   menu->addAction( m\_comment );
00164   menu->addAction( m\_uncomment );
00165   menu->addSeparator();
00166   menu->addAction( m\_deleteSelection );
00167   menu->addAction( m\_deleteEmptyRow );
00168   menu->addAction( m\_insertEmptyRow );
00169   menu->exec( mapToGlobal( point ) );
00170   \textcolor{keyword}{delete} menu;
00171 \}
00172 
00173 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00174 
00175 \textcolor{keywordtype}{void} GCPlainTextEdit::commentOutSelection()
00176 \{
00177   m\_cursorPositionChanging = \textcolor{keyword}{true};
00178 
00179   \textcolor{comment}{/* Capture the text before we make any changes. */}
00180   QString comment = textCursor().selectedText();
00181 
00182   \textcolor{keywordtype}{int} selectionStart = textCursor().selectionStart();
00183   \textcolor{keywordtype}{int} selectionEnd = textCursor().selectionEnd();
00184 
00185   QTextCursor cursor = textCursor();
00186   cursor.setPosition( selectionEnd );
00187   cursor.movePosition( QTextCursor::EndOfBlock );
00188 
00189   \textcolor{keywordtype}{int} finalBlockNumber = cursor.blockNumber();
00190 
00191   cursor.setPosition( selectionStart );
00192   cursor.movePosition( QTextCursor::StartOfBlock );
00193 
00194   QList< int > indices;
00195   QTextBlock block = cursor.block();
00196 
00197   \textcolor{keywordflow}{while}( block.isValid() &&
00198          block.blockNumber() <= finalBlockNumber )
00199   \{
00200     indices.append( findIndexMatchingBlockNumber( block ) );
00201     block = block.next();
00202   \}
00203 
00204   cursor.setPosition( selectionStart );
00205   cursor.beginEditBlock();
00206   cursor.insertText( OPENCOMMENT );
00207   cursor.endEditBlock();
00208 
00209   cursor.setPosition( selectionEnd );
00210   cursor.movePosition( QTextCursor::EndOfBlock );
00211   cursor.beginEditBlock();
00212   cursor.insertText( CLOSECOMMENT );
00213   cursor.endEditBlock();
00214 
00215   setTextCursor( cursor );
00216 
00217   \textcolor{keywordflow}{if}( confirmDomNotBroken( 2 ) )
00218   \{
00219     comment = comment.replace( QChar( 0x2029 ), \textcolor{charliteral}{'\(\backslash\)n'} );    \textcolor{comment}{// replace Unicode
       end of line character}
00220     comment = comment.trimmed();
00221     removeDuplicates( indices );
00222     emit \hyperlink{class_g_c_plain_text_edit_a5df13199f02cf478a436689d52924201}{commentOut}( indices, comment );
00223   \}
00224 
00225   m\_cursorPositionChanging = \textcolor{keyword}{false};
00226 \}
00227 
00228 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00229 
00230 \textcolor{keywordtype}{void} GCPlainTextEdit::uncommentSelection()
00231 \{
00232   m\_cursorPositionChanging = \textcolor{keyword}{true};
00233 
00234   \textcolor{keywordtype}{int} selectionStart = textCursor().selectionStart();
00235   \textcolor{keywordtype}{int} selectionEnd = textCursor().selectionEnd();
00236 
00237   QTextCursor cursor = textCursor();
00238   cursor.setPosition( selectionStart );
00239   cursor.movePosition( QTextCursor::StartOfBlock );
00240 
00241   cursor.setPosition( selectionEnd, QTextCursor::KeepAnchor );
00242   cursor.movePosition( QTextCursor::EndOfBlock, QTextCursor::KeepAnchor  );
00243 
00244   \textcolor{comment}{/* We need to capture this text way in the beginning before we start}
00245 \textcolor{comment}{    messing with cursor positions, etc. */}
00246   QString selectedText = cursor.selectedText();
00247 
00248   cursor.beginEditBlock();
00249   cursor.removeSelectedText();
00250   selectedText.remove( OPENCOMMENT );
00251   selectedText.remove( CLOSECOMMENT );
00252   cursor.insertText( selectedText );
00253   cursor.endEditBlock();
00254 
00255   setTextCursor( cursor );
00256 
00257   m\_cursorPositionChanging = \textcolor{keyword}{false};
00258 
00259   \textcolor{keywordflow}{if}( confirmDomNotBroken( 2 ) )
00260   \{
00261     emit \hyperlink{class_g_c_plain_text_edit_a1c4c9e285ce6803e23637b725cda37ea}{manualEditAccepted}();
00262   \}
00263 \}
00264 
00265 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00266 
00267 \textcolor{keywordtype}{void} GCPlainTextEdit::deleteSelection()
00268 \{
00269   m\_cursorPositionChanging = \textcolor{keyword}{true};
00270 
00271   textCursor().removeSelectedText();
00272 
00273   \textcolor{keywordflow}{if}( confirmDomNotBroken( 1 ) )
00274   \{
00275     emit \hyperlink{class_g_c_plain_text_edit_a1c4c9e285ce6803e23637b725cda37ea}{manualEditAccepted}();
00276   \}
00277 
00278   m\_cursorPositionChanging = \textcolor{keyword}{false};
00279 \}
00280 
00281 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00282 
00283 \textcolor{keywordtype}{void} GCPlainTextEdit::insertEmptyRow()
00284 \{
00285   QTextCursor cursor = textCursor();
00286   cursor.movePosition( QTextCursor::EndOfBlock );
00287   cursor.insertBlock();
00288   setTextCursor( cursor );
00289 \}
00290 
00291 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00292 
00293 \textcolor{keywordtype}{void} GCPlainTextEdit::deleteEmptyRow()
00294 \{
00295   QTextCursor cursor = textCursor();
00296   QTextBlock block = cursor.block();
00297 
00298   \textcolor{comment}{/* Check if the user is deleting an empty line (the only kind of deletion}
00299 \textcolor{comment}{    that is allowed). */}
00300   \textcolor{keywordflow}{if}( block.text().remove( \textcolor{stringliteral}{" "} ).isEmpty() )
00301   \{
00302     cursor.movePosition( QTextCursor::PreviousBlock );
00303     cursor.movePosition( QTextCursor::EndOfBlock );
00304     cursor.movePosition( QTextCursor::NextBlock, QTextCursor::KeepAnchor );
00305     cursor.movePosition( QTextCursor::EndOfBlock, QTextCursor::KeepAnchor );
00306     cursor.removeSelectedText();
00307     setTextCursor( cursor );
00308   \}
00309 \}
00310 
00311 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00312 
00313 \textcolor{keywordtype}{bool} GCPlainTextEdit::confirmDomNotBroken( \textcolor{keywordtype}{int} undoCount )
00314 \{
00315   QString xmlErr( \textcolor{stringliteral}{""} );
00316   \textcolor{keywordtype}{int}     line  ( -1 );
00317   \textcolor{keywordtype}{int}     col   ( -1 );
00318 
00319   \textcolor{comment}{/* Create a temporary document so that we do not mess with the contents}
00320 \textcolor{comment}{    of the tree item node map and current DOM if the new XML is broken. */}
00321   QDomDocument doc;
00322 
00323   \textcolor{keywordflow}{if}( !doc.setContent( toPlainText(), &xmlErr, &line, &col ) )
00324   \{
00325     \textcolor{comment}{/* Unfortunately the line number returned by the DOM doc doesn't match up
       with what's}
00326 \textcolor{comment}{      visible in the QTextEdit.  It seems as if it's mostly off by one line. 
       For now it's a}
00327 \textcolor{comment}{      fix, but will have to figure out how to make sure that we highlight the
       correct lines.}
00328 \textcolor{comment}{      Ultimately this finds the broken XML and highlights it in red...what a
       mission... */}
00329     QTextBlock textBlock = document()->findBlockByLineNumber( line - 1 );
00330     QTextCursor cursor( textBlock );
00331     cursor.movePosition( QTextCursor::NextWord );
00332     cursor.movePosition( QTextCursor::EndOfBlock, QTextCursor::KeepAnchor );
00333 
00334     m\_savedPalette = cursor.blockCharFormat().background();
00335 
00336     QTextEdit::ExtraSelection highlight;
00337     highlight.cursor = cursor;
00338     highlight.format.setBackground( QColor( 220, 150, 220 ) );
00339     highlight.format.setProperty  ( QTextFormat::FullWidthSelection, \textcolor{keyword}{true} );
00340 
00341     QList< QTextEdit::ExtraSelection > extras;
00342     extras << highlight;
00343     setExtraSelections( extras );
00344     ensureCursorVisible();
00345 
00346     QString errorMsg = QString( \textcolor{stringliteral}{"XML is broken - Error [%1], line [%2], column
       [%3].\(\backslash\)n\(\backslash\)n"}
00347                                 \textcolor{stringliteral}{"Your action will be reverted."} )
00348                        .arg( xmlErr )
00349                        .arg( line )
00350                        .arg( col );
00351     \hyperlink{namespace_g_c_message_space_ab118b3a133686167617eb955029fd44e}{GCMessageSpace::showErrorMessageBox}( \textcolor{keyword}{this}, errorMsg );
00352 
00353     \textcolor{keywordflow}{for}( \textcolor{keywordtype}{int} i = 0; i < undoCount; ++i )
00354     \{
00355       undo();
00356     \}
00357 
00358     highlight.cursor = textCursor();
00359     highlight.format.setBackground( m\_savedPalette );
00360     highlight.format.setProperty  ( QTextFormat::FullWidthSelection, \textcolor{keyword}{true} );
00361 
00362     extras.clear();
00363     extras << highlight;
00364     setExtraSelections( extras );
00365     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00366   \}
00367 
00368   \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00369 \}
00370 
00371 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00372 
00373 \textcolor{keywordtype}{int} GCPlainTextEdit::findIndexMatchingBlockNumber( QTextBlock block )
00374 \{
00375   \textcolor{keywordtype}{int} itemNumber = block.blockNumber();
00376   \textcolor{keywordtype}{int} errorCounter = 0;
00377   \textcolor{keywordtype}{bool} insideComment = \textcolor{keyword}{false};
00378 
00379   \textcolor{keywordflow}{while}( block.isValid() &&
00380          block.blockNumber() >= 0 )
00381   \{
00382     \textcolor{comment}{/* Check if we just entered a comment block (this is NOT wrong, remember}
00383 \textcolor{comment}{      that we are working our way back up the document, not down). */}
00384     \textcolor{keywordflow}{if}( block.text().contains( CLOSECOMMENT ) )
00385     \{
00386       errorCounter = 0;
00387       insideComment = \textcolor{keyword}{true};
00388     \}
00389 
00390     \textcolor{keywordflow}{if}( insideComment ||
00391         block.text().contains( \textcolor{stringliteral}{"</"} ) ||          \textcolor{comment}{// element close}
00392         block.text().remove( \textcolor{stringliteral}{" "} ).isEmpty() ||   \textcolor{comment}{// empty lines}
00393         ( block.text().contains( \textcolor{stringliteral}{"<?"} ) &&
00394           block.text().contains( \textcolor{stringliteral}{"?>"} ) ) )       \textcolor{comment}{// xml version specification}
00395     \{
00396       itemNumber--;
00397     \}
00398 
00399     \textcolor{comment}{/* Check if we are about to exit a comment block. */}
00400     \textcolor{keywordflow}{if}( block.text().contains( OPENCOMMENT ) )
00401     \{
00402       \textcolor{comment}{/* If we are exiting but we never entered, then we need to compensate for
       the}
00403 \textcolor{comment}{        subtractions we've done erroneously. */}
00404       \textcolor{keywordflow}{if}( !insideComment )
00405       \{
00406         itemNumber -= errorCounter;
00407       \}
00408 
00409       insideComment = \textcolor{keyword}{false};
00410     \}
00411 
00412     errorCounter++;
00413     block = block.previous();
00414   \}
00415 
00416   \textcolor{keywordflow}{return} itemNumber;
00417 \}
00418 
00419 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00420 
\hypertarget{gcplaintextedit_8cpp_source_l00421}{}\hyperlink{class_g_c_plain_text_edit_a56df0b287c0440a3f8f0f749929227f2}{00421} \textcolor{keywordtype}{void} \hyperlink{class_g_c_plain_text_edit_a56df0b287c0440a3f8f0f749929227f2}{GCPlainTextEdit::wrapText}( \textcolor{keywordtype}{bool} wrap )
00422 \{
00423   \textcolor{keywordflow}{if}( wrap )
00424   \{
00425     setLineWrapMode( QPlainTextEdit::WidgetWidth );
00426   \}
00427   \textcolor{keywordflow}{else}
00428   \{
00429     setLineWrapMode( QPlainTextEdit::NoWrap );
00430   \}
00431 \}
00432 
00433 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00434 
\hypertarget{gcplaintextedit_8cpp_source_l00435}{}\hyperlink{class_g_c_plain_text_edit_aed3616e5adab461d83bc6ab1497128e2}{00435} \textcolor{keywordtype}{void} \hyperlink{class_g_c_plain_text_edit_aed3616e5adab461d83bc6ab1497128e2}{GCPlainTextEdit::keyPressEvent}(QKeyEvent *e)
00436 \{
00437   \textcolor{keywordflow}{switch}( e->key() )
00438   \{
00439   \textcolor{keywordflow}{case} Qt::Key\_Return:
00440         insertEmptyRow();
00441     \textcolor{keywordflow}{break};
00442   \textcolor{keywordflow}{case} Qt::Key\_Delete:
00443         deleteEmptyRow();
00444     \textcolor{keywordflow}{break};
00445   \textcolor{keywordflow}{default}:
00446     \hyperlink{class_g_c_plain_text_edit_aed3616e5adab461d83bc6ab1497128e2}{QPlainTextEdit::keyPressEvent}( e );
00447   \}
00448 \}
00449 
00450 \textcolor{comment}{/*
      --------------------------------------------------------------------------------------*/}
00451 
\end{DoxyCode}
